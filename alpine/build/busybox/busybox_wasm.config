#
# BusyBox WASM Configuration
# Minimal configuration for WebAssembly
#
CONFIG_HAVE_DOT_CONFIG=y

# Settings
CONFIG_DESKTOP=n
CONFIG_LONG_OPTS=y
CONFIG_SHOW_USAGE=y
CONFIG_FEATURE_VERBOSE_USAGE=y
CONFIG_FEATURE_COMPRESS_USAGE=y
CONFIG_LFS=y
CONFIG_PREFIX="../packages/busybox-wasm"

# Build Options
CONFIG_STATIC=y
CONFIG_PIE=n
CONFIG_NOMMU=n
CONFIG_BUILD_LIBBUSYBOX=n
CONFIG_FEATURE_LIBBUSYBOX_STATIC=n
CONFIG_FEATURE_INDIVIDUAL=n
CONFIG_FEATURE_SHARED_BUSYBOX=n
CONFIG_CROSS_COMPILER_PREFIX="em"
CONFIG_SYSROOT=""
CONFIG_EXTRA_CFLAGS="-Os -s STANDALONE_WASM=1 -s EXPORTED_FUNCTIONS='[\"_main\"]' -s EXPORTED_RUNTIME_METHODS='[]' --no-entry -D__WASM__"
CONFIG_EXTRA_LDFLAGS="-s STANDALONE_WASM=1 -s EXPORTED_FUNCTIONS='[\"_main\"]' --no-entry"

# Installation Options
CONFIG_INSTALL_NO_USR=y
CONFIG_INSTALL_APPLET_SYMLINKS=y
CONFIG_INSTALL_APPLET_HARDLINKS=n
CONFIG_INSTALL_APPLET_SCRIPT_WRAPPERS=n
CONFIG_INSTALL_APPLET_DONT=n
CONFIG_PREFIX="../packages/busybox-wasm"

# Shells
CONFIG_ASH=y
CONFIG_ASH_OPTIMIZE_FOR_SIZE=y
CONFIG_ASH_INTERNAL_GLOB=y
CONFIG_ASH_BASH_COMPAT=y
CONFIG_ASH_BASH_SOURCE_CURDIR=y
CONFIG_ASH_IDLE_TIMEOUT=y
CONFIG_ASH_ECHO=y
CONFIG_ASH_PRINTF=y
CONFIG_ASH_TEST=y
CONFIG_ASH_HELP=y
CONFIG_ASH_GETOPTS=y
CONFIG_ASH_CMDCMD=y
CONFIG_ASH_ALIAS=y
CONFIG_ASH_JOB_CONTROL=y
CONFIG_ASH_READ=y
CONFIG_ASH_HISTORY=y
CONFIG_ASH_RANDOM_SUPPORT=y
CONFIG_ASH_EXPAND_PRMT=y
CONFIG_HUSH=n

# Coreutils
CONFIG_BASENAME=y
CONFIG_CAT=y
CONFIG_CHGRP=y
CONFIG_CHMOD=y
CONFIG_CHOWN=y
CONFIG_CHROOT=y
CONFIG_CKSUM=y
CONFIG_CP=y
CONFIG_CUT=y
CONFIG_DATE=y
CONFIG_DD=y
CONFIG_DF=y
CONFIG_DIRNAME=y
CONFIG_DOS2UNIX=y
CONFIG_UNIX2DOS=y
CONFIG_DU=y
CONFIG_ECHO=y
CONFIG_FEATURE_FANCY_ECHO=y
CONFIG_ENV=y
CONFIG_EXPAND=y
CONFIG_UNEXPAND=y
CONFIG_EXPR=y
CONFIG_FACTOR=y
CONFIG_FALSE=y
CONFIG_FOLD=y
CONFIG_HEAD=y
CONFIG_HOSTID=y
CONFIG_ID=y
CONFIG_GROUPS=y
CONFIG_INSTALL=y
CONFIG_LINK=y
CONFIG_LN=y
CONFIG_LOGNAME=y
CONFIG_LS=y
CONFIG_FEATURE_LS_FILETYPES=y
CONFIG_FEATURE_LS_FOLLOW_LINKS=y
CONFIG_FEATURE_LS_RECURSIVE=y
CONFIG_FEATURE_LS_WIDTH=y
CONFIG_FEATURE_LS_SORTFILES=y
CONFIG_FEATURE_LS_TIMESTAMPS=y
CONFIG_FEATURE_LS_USERNAME=y
CONFIG_FEATURE_LS_COLOR=y
CONFIG_MD5SUM=y
CONFIG_SHA1SUM=y
CONFIG_SHA256SUM=y
CONFIG_SHA512SUM=y
CONFIG_MKDIR=y
CONFIG_MKFIFO=y
CONFIG_MKNOD=y
CONFIG_MKTEMP=y
CONFIG_MV=y
CONFIG_NICE=y
CONFIG_NOHUP=y
CONFIG_NPROC=y
CONFIG_OD=y
CONFIG_PASTE=y
CONFIG_PRINTENV=y
CONFIG_PRINTF=y
CONFIG_PWD=y
CONFIG_READLINK=y
CONFIG_FEATURE_READLINK_FOLLOW=y
CONFIG_REALPATH=y
CONFIG_RM=y
CONFIG_RMDIR=y
CONFIG_SEQ=y
CONFIG_SHRED=y
CONFIG_SHUF=y
CONFIG_SLEEP=y
CONFIG_FEATURE_FANCY_SLEEP=y
CONFIG_SORT=y
CONFIG_SPLIT=y
CONFIG_STAT=y
CONFIG_FEATURE_STAT_FORMAT=y
CONFIG_STTY=y
CONFIG_SUM=y
CONFIG_SYNC=y
CONFIG_TAC=y
CONFIG_TAIL=y
CONFIG_FEATURE_FANCY_TAIL=y
CONFIG_TEE=y
CONFIG_TEST=y
CONFIG_FEATURE_TEST_64=y
CONFIG_TIMEOUT=y
CONFIG_TOUCH=y
CONFIG_FEATURE_TOUCH_NODEREF=y
CONFIG_FEATURE_TOUCH_SUSV3=y
CONFIG_TR=y
CONFIG_TRUE=y
CONFIG_TRUNCATE=y
CONFIG_TTY=y
CONFIG_UNAME=y
CONFIG_UNIQ=y
CONFIG_UNLINK=y
CONFIG_UPTIME=y
CONFIG_USLEEP=y
CONFIG_UUDECODE=y
CONFIG_BASE64=y
CONFIG_UUENCODE=y
CONFIG_WC=y
CONFIG_WHO=y
CONFIG_USERS=y
CONFIG_WHOAMI=y
CONFIG_YES=y

# Init
CONFIG_INIT=y
CONFIG_FEATURE_USE_INITTAB=y
CONFIG_FEATURE_KILL_REMOVED_PROCESS=y
CONFIG_FEATURE_KILL_DELAY=0
CONFIG_FEATURE_INIT_SCTTY=y
CONFIG_FEATURE_INIT_SYSLOG=y
CONFIG_FEATURE_INIT_QUIET=y
CONFIG_FEATURE_INIT_COREDUMPS=y
CONFIG_FEATURE_INIT_MODIFY_CMDLINE=y

# Disable networking (not available in WASM)
CONFIG_FEATURE_IPV6=n
CONFIG_ARP=n
CONFIG_ARPING=n
CONFIG_BRCTL=n
CONFIG_DNSD=n
CONFIG_ETHER_WAKE=n
CONFIG_FTPD=n
CONFIG_FTPGET=n
CONFIG_FTPPUT=n
CONFIG_HOSTNAME=y
CONFIG_HTTPD=n
CONFIG_IFCONFIG=n
CONFIG_IFENSLAVE=n
CONFIG_IFPLUGD=n
CONFIG_IFUP=n
CONFIG_IFDOWN=n
CONFIG_INETD=n
CONFIG_IP=n
CONFIG_IPADDR=n
CONFIG_IPLINK=n
CONFIG_IPROUTE=n
CONFIG_IPTUNNEL=n
CONFIG_IPRULE=n
CONFIG_IPCALC=n
CONFIG_NAMEIF=n
CONFIG_NC=n
CONFIG_NETSTAT=n
CONFIG_NSLOOKUP=n
CONFIG_NTPD=n
CONFIG_PING=n
CONFIG_PING6=n
CONFIG_ROUTE=n
CONFIG_SLATTACH=n
CONFIG_TELNET=n
CONFIG_TELNETD=n
CONFIG_TFTP=n
CONFIG_TFTPD=n
CONFIG_TRACEROUTE=n
CONFIG_UDHCPC=n
CONFIG_UDHCPC6=n
CONFIG_UDHCPD=n
CONFIG_VCONFIG=n
CONFIG_WGET=n
CONFIG_WHOIS=n
CONFIG_ZCIP=n

# Disable other Linux-specific features
CONFIG_MOUNT=n
CONFIG_UMOUNT=n
CONFIG_FSCK=n
CONFIG_MKFS_EXT2=n
CONFIG_MKFS_MINIX=n
CONFIG_MKFS_REISER=n
CONFIG_MKFS_VFAT=n
CONFIG_MKE2FS=n
CONFIG_TUNE2FS=n
CONFIG_LOSETUP=n
CONFIG_MKSWAP=n
CONFIG_SWAPONOFF=n
CONFIG_MDEV=n
CONFIG_BLKID=n
CONFIG_BLOCKDEV=n
CONFIG_DMESG=y
CONFIG_FEATURE_DMESG_PRETTY=y

# Utilities
CONFIG_ACPI=n
CONFIG_BLKDISCARD=n
CONFIG_CAL=y
CONFIG_CHRT=n
CONFIG_EJECT=n
CONFIG_FALLOCATE=n
CONFIG_FATATTR=n
CONFIG_FBSET=n
CONFIG_FLOCK=y
CONFIG_FREERAMDISK=n
CONFIG_FSCK=n
CONFIG_GETOPT=y
CONFIG_FEATURE_GETOPT_LONG=y
CONFIG_HEXDUMP=y
CONFIG_FEATURE_HEXDUMP_REVERSE=y
CONFIG_HD=y
CONFIG_XXD=y
CONFIG_HWCLOCK=n
CONFIG_IONICE=n
CONFIG_IPCRM=n
CONFIG_IPCS=n
CONFIG_LAST=y
CONFIG_FEATURE_LAST_FANCY=y
CONFIG_LSPCI=n
CONFIG_LSUSB=n
CONFIG_MESG=y
CONFIG_MKE2FS=n
CONFIG_MKFS_EXT2=n
CONFIG_MKFS_MINIX=n
CONFIG_MKFS_REISER=n
CONFIG_MKFS_VFAT=n
CONFIG_MKSWAP=n
CONFIG_MORE=y
CONFIG_MOUNTPOINT=n
CONFIG_NSENTER=n
CONFIG_PIVOT_ROOT=n
CONFIG_RDATE=n
CONFIG_READPROFILE=n
CONFIG_RENICE=y
CONFIG_REV=y
CONFIG_RTCWAKE=n
CONFIG_SCRIPT=y
CONFIG_SCRIPTREPLAY=y
CONFIG_SETARCH=n
CONFIG_SWAPONOFF=n
CONFIG_SWITCH_ROOT=n
CONFIG_UMOUNT=n
CONFIG_UNSHARE=n

# Process utilities
CONFIG_PS=y
CONFIG_FEATURE_PS_WIDE=y
CONFIG_FEATURE_PS_LONG=y
CONFIG_FEATURE_PS_TIME=y
CONFIG_FEATURE_PS_ADDITIONAL_COLUMNS=y
CONFIG_FEATURE_PS_UNUSUAL_SYSTEMS=y
CONFIG_KILL=y
CONFIG_KILLALL=y
CONFIG_KILLALL5=n
CONFIG_PIDOF=y
CONFIG_PGREP=y
CONFIG_PKILL=y
CONFIG_PSTREE=y
CONFIG_TOP=y
CONFIG_FEATURE_TOP_CPU_USAGE_PERCENTAGE=y
CONFIG_FEATURE_TOP_CPU_GLOBAL_PERCENTAGE=y
CONFIG_FEATURE_TOP_SMP_CPU=y
CONFIG_FEATURE_TOP_DECIMALS=y
CONFIG_FEATURE_TOP_SMP_PROCESS=y
CONFIG_FEATURE_TOPMEM=y
CONFIG_UPTIME=y
CONFIG_FEATURE_UPTIME_UTMP=n
CONFIG_WATCH=y

# Text processing
CONFIG_AWK=y
CONFIG_CMP=y
CONFIG_COMM=y
CONFIG_DIFF=y
CONFIG_ED=y
CONFIG_PATCH=y
CONFIG_SED=y
CONFIG_VI=y
CONFIG_FEATURE_VI_MAX_LEN=4096
CONFIG_FEATURE_VI_8BIT=n
CONFIG_FEATURE_VI_COLON=y
CONFIG_FEATURE_VI_YANKMARK=y
CONFIG_FEATURE_VI_SEARCH=y
CONFIG_FEATURE_VI_REGEX_SEARCH=y
CONFIG_FEATURE_VI_USE_SIGNALS=y
CONFIG_FEATURE_VI_DOT_CMD=y
CONFIG_FEATURE_VI_READONLY=y
CONFIG_FEATURE_VI_SETOPTS=y
CONFIG_FEATURE_VI_SET=y
CONFIG_FEATURE_VI_WIN_RESIZE=y
CONFIG_FEATURE_VI_ASK_TERMINAL=y
CONFIG_FEATURE_VI_UNDO=y
CONFIG_FEATURE_VI_UNDO_QUEUE=y
CONFIG_FEATURE_VI_UNDO_QUEUE_MAX=256
CONFIG_FEATURE_ALLOW_EXEC=y

# Finding utilities
CONFIG_FIND=y
CONFIG_FEATURE_FIND_PRINT0=y
CONFIG_FEATURE_FIND_MTIME=y
CONFIG_FEATURE_FIND_MMIN=y
CONFIG_FEATURE_FIND_PERM=y
CONFIG_FEATURE_FIND_TYPE=y
CONFIG_FEATURE_FIND_XDEV=y
CONFIG_FEATURE_FIND_MAXDEPTH=y
CONFIG_FEATURE_FIND_NEWER=y
CONFIG_FEATURE_FIND_INUM=y
CONFIG_FEATURE_FIND_EXEC=y
CONFIG_FEATURE_FIND_EXEC_PLUS=y
CONFIG_FEATURE_FIND_USER=y
CONFIG_FEATURE_FIND_GROUP=y
CONFIG_FEATURE_FIND_NOT=y
CONFIG_FEATURE_FIND_DEPTH=y
CONFIG_FEATURE_FIND_PAREN=y
CONFIG_FEATURE_FIND_SIZE=y
CONFIG_FEATURE_FIND_PRUNE=y
CONFIG_FEATURE_FIND_QUIT=y
CONFIG_FEATURE_FIND_DELETE=y
CONFIG_FEATURE_FIND_EMPTY=y
CONFIG_FEATURE_FIND_PATH=y
CONFIG_FEATURE_FIND_REGEX=y
CONFIG_FEATURE_FIND_CONTEXT=y
CONFIG_FEATURE_FIND_LINKS=y
CONFIG_GREP=y
CONFIG_FEATURE_GREP_EGREP_ALIAS=y
CONFIG_FEATURE_GREP_FGREP_ALIAS=y
CONFIG_FEATURE_GREP_CONTEXT=y
CONFIG_XARGS=y
CONFIG_FEATURE_XARGS_SUPPORT_CONFIRMATION=y
CONFIG_FEATURE_XARGS_SUPPORT_QUOTES=y
CONFIG_FEATURE_XARGS_SUPPORT_TERMOPT=y
CONFIG_FEATURE_XARGS_SUPPORT_ZERO_TERM=y
CONFIG_FEATURE_XARGS_SUPPORT_REPLACE_STR=y
CONFIG_FEATURE_XARGS_SUPPORT_PARALLEL=y
CONFIG_FEATURE_XARGS_SUPPORT_ARGS_FILE=y

# Archival utilities
CONFIG_TAR=y
CONFIG_FEATURE_TAR_CREATE=y
CONFIG_FEATURE_TAR_AUTODETECT=y
CONFIG_FEATURE_TAR_FROM=y
CONFIG_FEATURE_TAR_OLDGNU_COMPATIBILITY=y
CONFIG_FEATURE_TAR_OLDSUN_COMPATIBILITY=y
CONFIG_FEATURE_TAR_GZIP=y
CONFIG_FEATURE_TAR_BZIP2=y
CONFIG_FEATURE_TAR_LZMA=y
CONFIG_FEATURE_TAR_XZ=y
CONFIG_FEATURE_TAR_UNAME_GNAME=y
CONFIG_FEATURE_TAR_NOPRESERVE_TIME=y
CONFIG_FEATURE_TAR_SELINUX=y
CONFIG_UNZIP=y
CONFIG_GUNZIP=y
CONFIG_BUNZIP2=y
CONFIG_UNLZMA=y
CONFIG_LZMA=y
CONFIG_UNXZ=y
CONFIG_XZ=y
CONFIG_BZIP2=y
CONFIG_CPIO=y
CONFIG_FEATURE_CPIO_O=y
CONFIG_FEATURE_CPIO_P=y

# Disable login/utmp (not needed in WASM)
CONFIG_FEATURE_UTMP=n
CONFIG_FEATURE_WTMP=n
CONFIG_LOGIN=n
CONFIG_PASSWD=n
CONFIG_SU=y
CONFIG_SULOGIN=n
CONFIG_VLOCK=n

# Disable other features
CONFIG_FEATURE_SUID=n
CONFIG_FEATURE_SUID_CONFIG=n
CONFIG_SELINUX=n
CONFIG_FEATURE_PREFER_APPLETS=y
CONFIG_BUSYBOX_EXEC_PATH="/proc/self/exe"
CONFIG_FEATURE_SHELL_ASH=y
CONFIG_ASH=y
CONFIG_CTTYHACK=y
